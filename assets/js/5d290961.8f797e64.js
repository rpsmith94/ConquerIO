"use strict";(self.webpackChunkquant_docs=self.webpackChunkquant_docs||[]).push([[6691],{3905:function(t,e,a){a.d(e,{Zo:function(){return d},kt:function(){return c}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),u=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=u(t.components);return n.createElement(p.Provider,{value:e},t.children)},s="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),s=u(a),k=r,c=s["".concat(p,".").concat(k)]||s[k]||m[k]||l;return a?n.createElement(c,i(i({ref:e},d),{},{components:a})):n.createElement(c,i({ref:e},d))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=k;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o[s]="string"==typeof t?t:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},6468:function(t,e,a){a.r(e),a.d(e,{assets:function(){return d},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return s}});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),i=["components"],o={title:"WAF",sidebar_label:"Get started"},p=void 0,u={unversionedId:"security/waf/get-started",id:"security/waf/get-started",title:"WAF",description:"QuantCDN WAF is an optional extra that needs to be enabled for your account. To begin you will need to contact support and request WAF enablement for your organisation.",source:"@site/docs/security/waf/get-started.md",sourceDirName:"security/waf",slug:"/security/waf/get-started",permalink:"/ConquerIO/docs/security/waf/get-started",draft:!1,editUrl:"https://github.com/quantcdn/docs/tree/develop/docs/security/waf/get-started.md",tags:[],version:"current",frontMatter:{title:"WAF",sidebar_label:"Get started"},sidebar:"someSidebar",previous:{title:"API client workflow",permalink:"/ConquerIO/docs/api/client-workflow"},next:{title:"Manage",permalink:"/ConquerIO/docs/security/waf/management"}},d={},s=[{value:"Enabling WAF for your application",id:"enabling-waf-for-your-application",level:2},{value:"Configuration settings",id:"configuration-settings",level:3},{value:"Settings",id:"settings",level:4},{value:"Rules and IP overrides",id:"rules-and-ip-overrides",level:4},{value:"Block dictionaries",id:"block-dictionaries",level:4},{value:"HTTP:BL",id:"httpbl",level:4},{value:"IP rate limiting",id:"ip-rate-limiting",level:4},{value:"Request header rate limiting",id:"request-header-rate-limiting",level:4},{value:"Notification settings",id:"notification-settings",level:4}],m={toc:s},k="wrapper";function c(t){var e=t.components,o=(0,r.Z)(t,i);return(0,l.kt)(k,(0,n.Z)({},m,o,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"QuantCDN WAF is an optional extra that needs to be enabled for your account. To begin you will need to ",(0,l.kt)("a",{parentName:"p",href:"https://support.quantcdn.io"},"contact support")," and request WAF enablement for your organisation."),(0,l.kt)("p",null,"A WAF's aim is to protect dynamic systems from potentially harmful traffic patterns."),(0,l.kt)("h2",{id:"enabling-waf-for-your-application"},"Enabling WAF for your application"),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"When first enabling the WAF it is recommended to set the WAF in ",(0,l.kt)("strong",{parentName:"p"},"report")," mode. This will allow you to analyze traffic patterns and formulate a ruleset that will not impact your legitimate traffic.")),(0,l.kt)("p",null,"Once your account has WAF enabled you can utilise the ",(0,l.kt)("a",{parentName:"p",href:"https://dashboard.quantcdn.io/rules"},"rules")," page to add WAF and configure WAF to a proxy rule."),(0,l.kt)("p",null,"To add a rule:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Navigate to ",(0,l.kt)("a",{parentName:"li",href:"https://dashboard.quantcdn.io/rules"},"rules")),(0,l.kt)("li",{parentName:"ol"},"Create or edit a ",(0,l.kt)("strong",{parentName:"li"},"proxy rule")),(0,l.kt)("li",{parentName:"ol"},"Scroll down to ",(0,l.kt)("em",{parentName:"li"},"WAF settings")," and check the ",(0,l.kt)("strong",{parentName:"li"},"Enable WAF"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Quant Proxy Rule configuration",src:a(4533).Z,width:"2254",height:"1344"})),(0,l.kt)("h3",{id:"configuration-settings"},"Configuration settings"),(0,l.kt)("h4",{id:"settings"},"Settings"),(0,l.kt)("p",null,"General settings for the WAF."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"WAF Mode"),(0,l.kt)("td",{parentName:"tr",align:null},"Block"),(0,l.kt)("td",{parentName:"tr",align:null},"The opeating mode of the WAF")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"WAF Level"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"How strict the WAF will be when analyising traffic")))),(0,l.kt)("h4",{id:"rules-and-ip-overrides"},"Rules and IP overrides"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Always skip WAF rule"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Remove specific rules from your WAF configuration and is used to tune the WAF for your application")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Always allow from IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"An IP allowlist that will be excluded from WAF analysis")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Never allow from IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"A IP blocklist that will always be rejected by the WAF")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Never allow from user agent"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"User agent blocklist")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Never allow from referer"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"HTTP referer blocklist")))),(0,l.kt)("h4",{id:"block-dictionaries"},"Block dictionaries"),(0,l.kt)("p",null,"A dictionary of well-known bad actors that can be optionally enabled."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block bad bots"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Enable the bot blocklist")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block bad referers"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Enable the referer blocklist")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block bad IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Enable the IP blocklist")))),(0,l.kt)("h4",{id:"httpbl"},"HTTP:BL"),(0,l.kt)("p",null,"Enable ",(0,l.kt)("a",{parentName:"p",href:"https://www.projecthoneypot.org/httpbl.php"},"Project Honeypot")," integration for the WAF"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Enable Http:BL"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Enable project honeypot")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block suspicious IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Block IPs that project honeypot determines as suspicious")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block harvester IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Block any request that is determined to come from a data harvester")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block spam IPs"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Block spam IPs")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Block search engines"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Block requests that are marked as coming from search engines")))),(0,l.kt)("h4",{id:"ip-rate-limiting"},"IP rate limiting"),(0,l.kt)("p",null,"To better protect your application, the WAF can be configured to provide rate limits to request IPs. The rate limiting protects against burst IP traffic, the request rate needs to be sustained over a short period to trigger."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"When configuring the rate limit ensure to factor in asset requests \u2014 if you're average page load includes 200 assets this needs to be included as the rate limit is per proxy hit not per page view.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Mode"),(0,l.kt)("td",{parentName:"tr",align:null},"Disbaled"),(0,l.kt)("td",{parentName:"tr",align:null},"If the rate limit is applied")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"RPS threshold"),(0,l.kt)("td",{parentName:"tr",align:null},"10"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of requests that are required to trigger the rate limit")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Cooldown period"),(0,l.kt)("td",{parentName:"tr",align:null},"30"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of seconds a client's IP address will be restricted")))),(0,l.kt)("p",null,"When the rate limit is reached the WAF will respond with a 429 status code."),(0,l.kt)("h4",{id:"request-header-rate-limiting"},"Request header rate limiting"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Mode"),(0,l.kt)("td",{parentName:"tr",align:null},"Disabled"),(0,l.kt)("td",{parentName:"tr",align:null},"If the header rate limiting is enabled")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Header name"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"The name of the header used to group requests and apply the")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"RPS Threshold"),(0,l.kt)("td",{parentName:"tr",align:null},"5"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of requests per second a client needs to make in the window")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Cooldown period"),(0,l.kt)("td",{parentName:"tr",align:null},"30"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of seconds a blocked client will be restricted for")))),(0,l.kt)("h4",{id:"notification-settings"},"Notification settings"),(0,l.kt)("p",null,"QuantWAF can trigger notifications to a nominated Slack channel when a block or rate limit rule is triggered."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Setting"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Slack webhook"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Your applications webhook from Slack")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Slack RPM threshold"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Control the frequency of notifications to the webhook")))),(0,l.kt)("p",null,"Please see the ",(0,l.kt)("a",{parentName:"p",href:"https://api.slack.com/messaging/webhooks"},"Slack")," documentation for creating a webhook."))}c.isMDXComponent=!0},4533:function(t,e,a){e.Z=a.p+"assets/images/proxy-rule-ad9034d7336cae94194c7cbb9aa6f169.png"}}]);