"use strict";(self.webpackChunkquant_docs=self.webpackChunkquant_docs||[]).push([[3108],{3905:function(e,r,t){t.d(r,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=a.createContext({}),u=function(e){var r=a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},c=function(e){var r=u(e.components);return a.createElement(l.Provider,{value:r},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},f=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(t),f=n,m=d["".concat(l,".").concat(f)]||d[f]||p[f]||o;return t?a.createElement(m,i(i({ref:r},c),{},{components:t})):a.createElement(m,i({ref:r},c))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,i=new Array(o);i[0]=f;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s[d]="string"==typeof e?e:n,i[1]=s;for(var u=2;u<o;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},6281:function(e,r,t){t.r(r),t.d(r,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var a=t(7462),n=t(3366),o=(t(7294),t(3905)),i=["components"],s={id:"page-rules-proxy",title:"CDN Proxy",sidebar_label:"CDN Proxy"},l=void 0,u={unversionedId:"dashboard/page-rules-proxy",id:"dashboard/page-rules-proxy",title:"CDN Proxy",description:"Proxy rules can be configured to route traffic back to your origin server(s) while maintaining a cache in our edge content delivery network.",source:"@site/docs/dashboard/page-rules-proxy.md",sourceDirName:"dashboard",slug:"/dashboard/page-rules-proxy",permalink:"/ConquerIO/docs/dashboard/page-rules-proxy",draft:!1,editUrl:"https://github.com/quantcdn/docs/tree/develop/docs/dashboard/page-rules-proxy.md",tags:[],version:"current",frontMatter:{id:"page-rules-proxy",title:"CDN Proxy",sidebar_label:"CDN Proxy"},sidebar:"someSidebar",previous:{title:"Page Rules",permalink:"/ConquerIO/docs/dashboard/page-rules"},next:{title:"Web Application Firewall (WAF)",permalink:"/ConquerIO/docs/dashboard/page-rules-waf"}},c={},d=[{value:"Configuration overview",id:"configuration-overview",level:2},{value:"Failover mode",id:"failover-mode",level:2},{value:"Request headers",id:"request-headers",level:2}],p={toc:d},f="wrapper";function m(e){var r=e.components,s=(0,n.Z)(e,i);return(0,o.kt)(f,(0,a.Z)({},p,s,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Proxy rules can be configured to route traffic back to your origin server(s) while maintaining a cache in our edge content delivery network."),(0,o.kt)("p",null,"This is effectively a traditional CDN, however there are many additional options available such as static failover, header overrides, alert injection, image optimization, and web-application firewall."),(0,o.kt)("h2",{id:"configuration-overview"},"Configuration overview"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Proxy configuration",src:t(6131).Z,width:"1129",height:"616"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Proxy address"),": is your backend/origin server. This may be a FQDN or IP address and should include the protocol."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Host header"),": should be a valid Host header to send to the origin server."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Basic authentication"),": provide a username and password if the origin server is protected by basic authentication."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cache lifetime"),": optionally override the cache lifetime of the proxied response in Quant. Leave blank to inherit the cache headers sent by your backend server."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Disable TLS verification"),": may be used if the server is using a self-signed (or other invalid) certificate."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Only on 404"),": will serve from the Quant static edge if content exists, else proxy."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Failover mode"),": will serve from the Quant static offload only if the origin server shows sign of duress, or returns an unexpected response. ",(0,o.kt)("a",{parentName:"li",href:"#failover-mode"},"More detail below"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Include injected alert"),": allows you to alter the markup response and include the ",(0,o.kt)("a",{parentName:"li",href:"./alerts"},"sitewide alert banner"),". This can be useful to allow widespread alert messaging to be presented to end users without the need for application-level change.")),(0,o.kt)("p",null,"You may use the wildcard captures in your proxies, simply include a capture value in the proxy address. For example: a match on ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/*")," with a proxy address: ",(0,o.kt)("inlineCode",{parentName:"p"},"https://api.example.com/v1/$1"),"."),(0,o.kt)("h2",{id:"failover-mode"},"Failover mode"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Static failover mode",src:t(347).Z,width:"445",height:"377"})),(0,o.kt)("p",null,"When failover mode is enabled Quant is configured as a static failover service. In this mode, requests will be proxied back to your origin server unless signs of distress are detected."),(0,o.kt)("p",null,"For example, if your origin server takes more than 10 seconds to return a response, or returns an unexpected status code."),(0,o.kt)("p",null,"In this mode you may receive notifications when a failover mode is triggered. You may also specify a failover cache lifetime, which will ensure traffic is kept away from your origin server for a defined period."),(0,o.kt)("h2",{id:"request-headers"},"Request headers"),(0,o.kt)("p",null,"You may optionally inject extra request headers to your origin server. This is useful to provide an extra layer of security, e.g: pass a shared key back to your origin server to protect direct origin server access."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Additional header example",src:t(9190).Z,width:"871",height:"289"})),(0,o.kt)("p",null,"You may also optionally strip response headers. This is useful to exclude certain origin headers from the response sent back to your end users. For example, this may be useful for excluding headers that contain mention of versions of software running on your origin server to improve security posture."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Strip header example",src:t(4306).Z,width:"873",height:"292"})))}m.isMDXComponent=!0},9190:function(e,r,t){r.Z=t.p+"assets/images/rules-proxy-additional-header-993e01a5b69edae12ab83e439dbf3548.png"},347:function(e,r,t){r.Z=t.p+"assets/images/rules-proxy-failover-fa7bb2c8ef6e185f401c5fb1684c23cf.png"},4306:function(e,r,t){r.Z=t.p+"assets/images/rules-proxy-strip-header-83c5a9722d149d249fe51daa0cae684a.png"},6131:function(e,r,t){r.Z=t.p+"assets/images/rules-proxy-6acb068cf7816005d98d5f964151204f.png"}}]);