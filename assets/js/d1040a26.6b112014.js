"use strict";(self.webpackChunkquant_docs=self.webpackChunkquant_docs||[]).push([[7561],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[p]="string"==typeof e?e:a,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7894:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return c},metadata:function(){return s},toc:function(){return p}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],c={id:"search",title:"Custom search records",sidebar_label:"Search records"},l=void 0,s={unversionedId:"api/search",id:"api/search",title:"Custom search records",description:"Search records can be independently managed via the Search API. You may also explicitly define search records at the same time content is posted.",source:"@site/docs/api/search.md",sourceDirName:"api",slug:"/api/search",permalink:"/ConquerIO/docs/api/search",draft:!1,editUrl:"https://github.com/quantcdn/docs/tree/develop/docs/api/search.md",tags:[],version:"current",frontMatter:{id:"search",title:"Custom search records",sidebar_label:"Search records"},sidebar:"someSidebar",previous:{title:"Get started (Projects)",permalink:"/ConquerIO/docs/api/get-started-projects"},next:{title:"API client workflow",permalink:"/ConquerIO/docs/api/client-workflow"}},u={},p=[{value:"Using the Search API",id:"using-the-search-api",level:2},{value:"Check index status",id:"check-index-status",level:3},{value:"Creating new records",id:"creating-new-records",level:3},{value:"Make an attribute filterable (facet support)",id:"make-an-attribute-filterable-facet-support",level:3},{value:"Deleting an individual record",id:"deleting-an-individual-record",level:3},{value:"Clear entire index",id:"clear-entire-index",level:3},{value:"Custom search record when posting content",id:"custom-search-record-when-posting-content",level:2},{value:"Supported keys",id:"supported-keys",level:3}],d={toc:p},m="wrapper";function h(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)(m,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Search records can be independently managed via the Search API. You may also explicitly define search records at the same time content is posted."),(0,o.kt)("p",null,"This can be useful for more control over structured data (e.g title/summary/content/filterable attributes) rather than relying on the content extractors."),(0,o.kt)("h2",{id:"using-the-search-api"},"Using the Search API"),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/get-started-content"},"Getting Started")," section first to ensure you can authenticate and make successful API connections."),(0,o.kt)("h3",{id:"check-index-status"},"Check index status"),(0,o.kt)("p",null,"Use this endpoint to check index size, outstanding tasks, and basic configuration. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -H "Quant-Customer: [example-customer]" -H "Quant-Project: [example-project]" -H "Quant-Token: [project-token]" https://api.quantcdn.io/v1/search\n')),(0,o.kt)("h3",{id:"creating-new-records"},"Creating new records"),(0,o.kt)("p",null,"Use this endpoint to create or update search records. Mandatory keys are ",(0,o.kt)("inlineCode",{parentName:"p"},"title"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"content"),"."),(0,o.kt)("p",null,"Provide an array of search records. For example consider a ",(0,o.kt)("inlineCode",{parentName:"p"},"search-records.json")," file containing the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    {\n        "title": "This is a record",\n        "url": "/blog/page",\n        "summary": "The record is small and neat.",\n        "content": "Lots of good content here. But not too much!",\n    },\n    {\n        "title": "Fully featured search record",\n        "url": "/about-us",\n        "summary": "The record contains all the trimmings.",\n        "content": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras id dolor facilisis, ornare erat et, scelerisque odio. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.",\n        "image": "https://www.example.com/images/about.jpg",\n        "categories": [ "Blog", "Commerce", "Jamstack" ],\n        "tags": [ "Tailwind" , "QuantCDN" ]\n    }\n]\n')),(0,o.kt)("p",null,"An example curl request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X POST -H "Quant-Customer: [example-customer]" -H "Quant-Project: [example-project]" -H "Quant-Token: [project-token]"  -d @./search-records.json https://api.quantcdn.io/v1/search\n')),(0,o.kt)("h3",{id:"make-an-attribute-filterable-facet-support"},"Make an attribute filterable (facet support)"),(0,o.kt)("p",null,"As above, search records may contain attributes you may wish to filter on (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"categories")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"tags"),"). Let the Search API know about new attributes like so:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X POST -H "Quant-Customer: [example-customer]" -H "Quant-Project: [example-project]" -H "Quant-Token: [project-token]" -d \'["categories", "tags"]\' https://api.quantcdn.io/v1/search/facet\n')),(0,o.kt)("h3",{id:"deleting-an-individual-record"},"Deleting an individual record"),(0,o.kt)("p",null,"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"DELETE")," method combined with a ",(0,o.kt)("inlineCode",{parentName:"p"},"Quant-Url")," header to remove an item from the index."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X DELETE -H "Quant-Customer: [example-customer]" -H "Quant-Project: [example-project]" -H "Quant-Token: [project-token]" -H "Quant-Url: /about-us" https://api.quantcdn.io/v1/search\n')),(0,o.kt)("h3",{id:"clear-entire-index"},"Clear entire index"),(0,o.kt)("p",null,"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"DELETE")," method to clear the entire search index. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X DELETE -H "Quant-Customer: [example-customer]" -H "Quant-Project: [example-project]" -H "Quant-Token: [project-token]" https://api.quantcdn.io/v1/search/all\n')),(0,o.kt)("h2",{id:"custom-search-record-when-posting-content"},"Custom search record when posting content"),(0,o.kt)("p",null,"Simply include a ",(0,o.kt)("inlineCode",{parentName:"p"},"search_record")," object in your content payload structure. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"curl -X POST https://api.quantcdn.io/v1 -d @./payload.json\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "content": "<html><body><img src="/banner.jpg" /><h1>My static web page</h1></body></html>",\n  "url": "/",\n  "published": true,\n  "info": {\n    "author_name": "Joe Static",\n    "author_email": "joe@quantcdn.io",\n    "log": "Included custom search_record values"\n  },\n  "search_record": {\n    "title" : "Manually provided title",\n    "summary" : "Content snippet to display in search results.",\n    "content" : "This page has a lot of body content. It is manually provided via search_record.",\n    "image" : "https://via.placeholder.com/custom",\n    "categories" : {\n      "tags" : [ "manual-tag-1", "manual-tag-2" ],\n      "custom_taxonomy" : [ "apple", "banana", "pineapple" ]\n    }\n  }\n}\n')),(0,o.kt)("h3",{id:"supported-keys"},"Supported keys"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"title"),": Used both as a searchable attribute and the title used in search results"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"summary"),": Used both as a searchable attribute and the content snippet displayed in the search results."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"content"),": Used as a searchable attribute. May contain markup (tags will be stripped). May be a large content body (e.g could be the entire page content)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"image"),": Used on some search result displays when available. Should be a full URL to an image."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"categories"),": An object containing any number of categories with an array of terms. Allows for faceting and filtering.")),(0,o.kt)("p",null,"All keys within ",(0,o.kt)("inlineCode",{parentName:"p"},"search_record")," are optional. The ",(0,o.kt)("a",{parentName:"p",href:"/docs/dashboard/search#content-extractors"},"configured extractors")," will attempt to determine content as a fallback."),(0,o.kt)("p",null,"Search records can be updated independently of content. This means even if the static content MD5 is unchanged the record will still be updated in the search index."))}h.isMDXComponent=!0}}]);